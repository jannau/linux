
#include <linux/debugfs.h>
#include <linux/seq_file.h>

#include <linux/mfd/wm8994/core.h>
#include <linux/mfd/wm8994/pdata.h>
#include <linux/mfd/wm8994/registers.h>

static struct dentry *wm8994_debugfs;

static const u16 reg_list[] = {
0x0,
0x1,
0x2,
0x3,
0x4,
0x5,
0x6,
0x15,
0x18,
0x19,
0x1a,
0x1b,
0x1c,
0x1d,
0x1e,
0x1f,
0x20,
0x21,
0x22,
0x23,
0x24,
0x25,
0x26,
0x27,
0x28,
0x29,
0x2a,
0x2b,
0x2c,
0x2d,
0x2e,
0x2f,
0x30,
0x31,
0x32,
0x33,
0x34,
0x35,
0x36,
0x37,
0x38,
0x39,
0x3a,
0x3b,
0x3c,
0x4c,
0x51,
0x54,
0x55,
0x57,
0x58,
0x60,
0x100,
0x101,
0x110,
0x111,
0x200,
0x201,
0x204,
0x205,
0x208,
0x209,
0x210,
0x211,
0x212,
0x220,
0x221,
0x222,
0x223,
0x224,
0x240,
0x241,
0x242,
0x243,
0x244,
0x300,
0x301,
0x302,
0x303,
0x304,
0x305,
0x306,
0x307,
0x310,
0x311,
0x312,
0x313,
0x314,
0x315,
0x316,
0x317,
0x400,
0x401,
0x402,
0x403,
0x404,
0x405,
0x406,
0x407,
0x410,
0x411,
0x420,
0x421,
0x422,
0x423,
0x440,
0x441,
0x442,
0x443,
0x444,
0x450,
0x451,
0x452,
0x453,
0x454,
0x480,
0x481,
0x482,
0x483,
0x484,
0x485,
0x486,
0x487,
0x488,
0x489,
0x48a,
0x48b,
0x48c,
0x48d,
0x48e,
0x48f,
0x490,
0x491,
0x492,
0x493,
0x4a0,
0x4a1,
0x4a2,
0x4a3,
0x4a4,
0x4a5,
0x4a6,
0x4a7,
0x4a8,
0x4a9,
0x4aa,
0x4ab,
0x4ac,
0x4ad,
0x4ae,
0x4af,
0x4b0,
0x4b1,
0x4b2,
0x4b3,
0x500,
0x501,
0x502,
0x503,
0x510,
0x520,
0x521,
0x540,
0x541,
0x542,
0x543,
0x544,
0x580,
0x581,
0x582,
0x583,
0x584,
0x585,
0x586,
0x587,
0x588,
0x589,
0x58a,
0x58b,
0x58c,
0x58d,
0x58e,
0x58f,
0x590,
0x591,
0x592,
0x593,
0x600,
0x601,
0x602,
0x603,
0x604,
0x605,
0x606,
0x607,
0x608,
0x609,
0x610,
0x611,
0x612,
0x613,
0x614,
0x620,
0x621,
0x700,
0x701,
0x702,
0x703,
0x704,
0x705,
0x706,
0x707,
0x708,
0x709,
0x70a,
0x730,
0x731,
0x732,
};



static int wm8994_show(struct seq_file *s, void *unused)
{
	struct wm8994 *wm8994 = s->private;
	int i;

	for (i = 0; i < ARRAY_SIZE(reg_list); i++) {
		u16 val = wm8994_reg_read(wm8994, reg_list[i]);
		seq_printf(s, "%2x: %4x\n", reg_list[i], val);
	}

	return 0;
}

static int wm8994_debug_open(struct inode *inode, struct file *file)
{
	return single_open(file, wm8994_show, inode->i_private);
}

static const struct file_operations wm8994_debug_fops = {
	.open    = wm8994_debug_open,
	.read    = seq_read,
	.llseek  = seq_lseek,
	.release = single_release,
};

static void wm8994_debug_add(struct wm8994 *wm8994)
{
	char name[] = "wm8994_regs";

	wm8994_debugfs = debugfs_create_file(name, S_IRUGO, NULL,
						wm8994, &wm8994_debug_fops);
}

static void wm8994_debug_remove(void)
{
    if (wm8994_debugfs)
        debugfs_remove(wm8994_debugfs);
}
